<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="style.css">
    <title>The Gamer</title>
</head>
<body>
<header style="position: relative;">
    <div class="w3-top" class="header" id="home">
        <div class="w3-bar w3-card w3-left-align w3-large header-large-screen" style="background-color: #000015;">
            <a class="w3-bar-item w3-button w3-hide-medium w3-hide-large w3-right w3-padding-large w3-hover-black w3-large" href="javascript:void(0);" onclick="myFunction()" title="Toggle Navigation Menu"><i class="fa fa-bars"></i></a>
            <a href="#home" class="w3-bar-item w3-button w3-padding-large w3-hover-black">Mini-Boss</a>
            <div>
                <a href="#about" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-black">About</a>
                <a href="#games" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-black">Games</a>
                <a href="#shop" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-black">Shop</a>
                <a href="#events" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-black">Events</a>
                <a href="#contact" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-black">Contact</a>
            </div>
        </div>
        <!-- Navbar on small screens -->
        <div id="navDemo" class="w3-bar-block w3-hide w3-hide-large w3-hide-medium w3-large">
            <a href="#about" class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">About</a>
            <a href="#games" class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">Games</a>
            <a href="#shop" class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">Shop</a>
            <a href="#events" class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">Events</a>
            <a href="#contact" class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">Contact</a>
        </div>
    </div>
</header>

<section>
    <div class="hero" id="about">
        <div class="hero-description">
            <div class="hero-text">
                <h1 class="hero-title">Adding Fun to your Life</h1>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Officiis, impedit quo. Officia nisi corrupti iste asperiores accusamus quisquam quod perspiciatis vitae? Esse eum molestiae ab quasi omnis quidem officia eaque.</p>
                <span class="w3-text-white social" style="margin-top:50px">
                    <p>Follow us on Social media</p>
                    <div class="w3-margin-top">
                        <a href="#"><i class="fa fa-facebook-official w3-hover-opacity icons"></i></a>
                        <a href="#"><i class="fa fa-instagram w3-hover-opacity icons"></i></a>
                        <a href="#"><i class="fa fa-snapchat w3-hover-opacity icons"></i></a>
                        <a href="#"><i class="fa fa-pinterest-p w3-hover-opacity icons"></i></a>
                        <a href="#"><i class="fa fa-twitter w3-hover-opacity icons"></i></a>
                        <a href="#"><i class="fa fa-linkedin w3-hover-opacity icons"></i></a>
                    </div>
                </span>
            </div>
        </div>
    </div>
</section>

<main style="padding-bottom:40px;">
    <h2 class="title" id="games">List of Games</h2>
    <div class="games">
        <!-- Games will be dynamically populated here -->
    </div>
    <!-- Form for adding a new game -->
    <div class="game-form">
        <h2 class="title">Add a New Game</h2>
        <input type="text" id="gameName" placeholder="Game Name">
        <input type="text" id="gameType" placeholder="Game Type">
        <input type="text" id="gameImageUrl" placeholder="Image URL">
        <button onclick="addGame()">Add Game</button>
    </div>

    <div class="store" id="shop">
        <h2 class="title">Find Your Store</h2>
        <div>
            <label for="location">Location:</label>
            <input type="text" id="storeLocation" name="location">
            <button onclick="findStoreByLocation()">Search by Location</button>
        </div>
        <div>
            <label for="name">Store Name:</label>
            <input type="text" id="storeName" name="name">
            <button onclick="findStoreByName()">Search by Name</button>
        </div>
        <div>
            <label for="category">Category:</label>
            <input type="text" id="storeCategory" name="category">
            <button onclick="findStoreByCategory()">Search by Category</button>
        </div>
        <div>
            <button onclick="getAllStores()">Get All Stores</button>
        </div>
        <div id="store-results"></div>
    </div>

    <!-- Form for creating a business profile -->
    <div class="create-business" id="create-business">
        <h2 class="title">Create Business Profile</h2>
        <form id="business-form" onsubmit="event.preventDefault(); createBusinessProfile();">
            <div>
                <label for="businessName">Business Name:</label>
                <input type="text" id="businessName" name="businessName" placeholder="Business Name" required>
            </div>
            <div>
                <label for="businessCategory">Category:</label>
                <input type="text" id="businessCategory" name="businessCategory" placeholder="Category">
            </div>
            <div>
                <label for="businessTime">Opening Hours:</label>
                <input type="text" id="businessTime" name="businessTime" placeholder="e.g., Mon-Fri: 9 AM - 5 PM" required>
            </div>
            <div>
                <label for="businessLatitude">Latitude:</label>
                <input type="text" id="businessLatitude" name="latitude" placeholder="Latitude" readonly>
            </div>
            <div>
                <label for="businessLongitude">Longitude:</label>
                <input type="text" id="businessLongitude" name="longitude" placeholder="Longitude" readonly>
            </div>
            <div>
                <label for="businessImageUrl">Business Image URL:</label>
                <input type="text" id="businessImageUrl" name="imageUrl" placeholder="Business Image">
            </div>
            <div>
                <h3>Select Business Location</h3>
                <div id="map" style="height: 400px; margin-bottom: 20px;"></div>
            </div>
            <div>
                <label for="businessLocation">Address:</label>
                <input type="text" id="businessLocation" name="location" placeholder="Click on the map to select location" readonly required>
            </div>
         <!--   <input type="hidden" id="latitude" name="latitude">
            <input type="hidden" id="longitude" name="longitude">-->

            <button type="submit">Submit</button>
        </form>
        <div id="message"></div> <!-- For displaying success or error messages -->
    </div>

    <!-- External resources -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>


    <div class="event" id="events">
        <h2 class="title">Upcoming Events</h2>
        <div class="event-hero" style="position: relative;">
            <!-- Events will be dynamically populated here -->
        </div>
    </div>

    <div>
        <h2 class="title">Reach out to us</h2>
        <div class="contact" id="contact" style="padding-bottom: 10px !important;">
            <div class="contact-list contact-address">
                <h5><span><i class="fa fa-map-marker w3-xlarge w3-text-light-grey"></i></span>Address</h5>
                <p>Akersgata 12, Oslo, Norway </p>
                <p>Bogstadveien 34, Oslo, Norway </p>
                <p>Karl Johans gate 1, Oslo, Norway </p>
            </div>
            <div class="contact-list">
                <h5><span><i class="fa fa-envelope w3-xlarge w3-text-light-grey"></i></span>Receive weekly update email</h5>
                <div class="email-contact">
                    <input placeholder="Email" type="email" style="margin: 8px"/>
                    <button class="w3-btn w3-red w3-round" style="width: 100px; padding:3px 10px !important">Subscribe</button>
                </div>
            </div>
            <div class="contact-list">
                <h5><span><i class="fa fa-phone w3-xlarge w3-text-light-grey"></i></span>Phone</h5>
                <p>763-957-6781</p>
                <p>706-734-2591</p>
            </div>
        </div>
    </div>
</main>

<div class="w3-padding w3-center" style="background: #FFF4A3;padding: 10px 0px !important; color:#282A35;">
    <div style="display: flex; justify-content: center;align-items: center; flex-wrap: wrap;">
        <p style="margin: 10px !important;">This website was made with w3schools Spaces. Make your own free website today</p>
        <button class="w3-margin-top w3-btn w3-text-white w3-round-xxlarge" style="background-color:#282A35;padding: 8px 25px; margin:0px !important">Start now</button>
    </div>
</div>

<!-- Add a canvas element for the user chart -->
<canvas id="userChart" width="400" height="200"></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="script.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Initialize the map
        const map = L.map('map').setView([40.7994, -124.1644], 13); // Default to Eureka

        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        let marker;

        // Click event to place a marker and get coordinates
        map.on('click', function (e) {
            const { lat, lng } = e.latlng;

            // Place or move the marker
            if (marker) {
                marker.setLatLng(e.latlng);
            } else {
                marker = L.marker(e.latlng).addTo(map);
            }

            // Update hidden fields
            document.getElementById('businessLatitude').value = lat;
            document.getElementById('businessLongitude').value = lng;

            // Fetch and update the address
            fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}`)
                .then(response => response.json())
                .then(data => {
                    const address = data.display_name || 'Address not found';
                    document.getElementById('businessLocation').value = address;
                })
                .catch(error => {
                    console.error('Error fetching address:', error);
                    document.getElementById('businessLocation').value = 'Unable to fetch address';
                });
        });
    });
</script>
<script>
    document.getElementById('business-form').addEventListener('submit', function (event) {
        event.preventDefault(); // Prevent default form submission

        // Collect form data
        const businessData = {
            businessName: document.getElementById('businessName').value,
            businessCategory: document.getElementById('businessCategory').value,
            businessLocation: document.getElementById('businessLocation').value,
            businessLatitude: document.getElementById('businessLatitude').value,
            businessLongitude: document.getElementById('businessLongitude').value,
            businessImageUrl: document.getElementById('businessImageUrl').value,
            businessTime: document.getElementById('businessTime').value,
        };

        // Send POST request to backend
        fetch('/api/business/addBusiness', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(businessData), // Send data as JSON
        })
        .then(response => response.json())
        .then(data => {
            console.log('Business added:', data);
            alert('Business added successfully');
        })
        .catch(error => {
            console.error('Error:', error);
            alert('Error adding business');
        });
    });
</script>
</body>
</html>
